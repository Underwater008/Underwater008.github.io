import{S as Mt,P as Lt,W as Tt,a as vt}from"./three.module-Bpzav5OJ.js";import{G as zt,O as bt}from"./GLTFLoader-D6rlin6q.js";(()=>{const g=document.getElementById("loading-container");if(!g)return;const c=document.getElementById("starfield-canvas"),a=document.getElementById("particle-canvas"),tt=document.getElementById("progress-bar"),et=document.getElementById("progress-text"),q=document.getElementById("progress-dots"),A=document.getElementById("content-container");if(A&&(A.style.opacity="0"),document.body.classList.add("loading-active"),q){q.innerHTML="";for(let o=0;o<20;o+=1){const t=document.createElement("div");t.className="progress-dot",q.appendChild(t)}}let X=1,k=0,nt=!1,j=!1,F=!1;const it=setTimeout(()=>{nt=!0,Y()},15e3);function Y(){if(F)return;const o=k>=X||nt;j&&o&&xt()}window.addEventListener("stellar-loader:setAssetCount",o=>{const t=Number(o.detail);!Number.isNaN(t)&&t>=0&&(X=t,k>=X&&clearTimeout(it),Y())}),window.addEventListener("stellar-loader:assetLoaded",()=>{k+=1,k>=X&&clearTimeout(it),Y()});const D=c.getContext("2d"),w=a.getContext("2d"),st=.15,H=["HELLO WORLD","I am a GAMER","I am a PROGRAMMER","I am a DESIGNER","I am Homo Ludens","I am XIAO"];let N=0,b="",L=0,M=0,x=[],h=[],d=[],I=[];function at(){c.width=window.innerWidth,c.height=window.innerHeight,a.width=window.innerWidth,a.height=window.innerHeight,x=[],h=[],d=[],I=[],L=Math.max(40,a.width*st),M=0}at(),window.addEventListener("resize",()=>{at(),J(b),d=[],K(N)});class pt{constructor(){this.reset()}reset(){this.x=Math.random()*c.width,this.y=Math.random()*c.height,this.z=Math.random()*2e3,this.size=Math.random()*1.5+.5,this.opacity=Math.random()*.5+.3,this.twinkleSpeed=Math.random()*.02+.01,this.twinkleOffset=Math.random()*Math.PI*2}update(){this.z-=1,this.z<=0&&(this.reset(),this.z=2e3)}draw(t){const s=(this.x-c.width/2)*(1e3/this.z)+c.width/2,e=(this.y-c.height/2)*(1e3/this.z)+c.height/2,i=this.size*(1e3/this.z);if(s<0||s>c.width||e<0||e>c.height){this.reset();return}const E=Math.sin(t*this.twinkleSpeed+this.twinkleOffset)*.3+.7,m=this.opacity*E*(1e3/this.z);D.fillStyle=`rgba(0, 0, 0, ${m})`,D.fillRect(s,e,i,i)}}const ut=Array.from({length:200},()=>new pt);class G{constructor(t,s,e,i){this.x=t,this.y=s,this.targetX=e,this.targetY=i,this.size=Math.random()*2+1,this.opacity=0,this.targetOpacity=1}update(){const t=this.targetX-this.x,s=this.targetY-this.y,e=.08;this.x+=t*e,this.y+=s*e,this.opacity<this.targetOpacity?this.opacity=Math.min(this.opacity+.03,this.targetOpacity):this.opacity>this.targetOpacity&&(this.opacity=Math.max(this.opacity-.03,this.targetOpacity))}draw(){w.fillStyle=`rgba(0, 0, 0, ${this.opacity})`,w.fillRect(this.x,this.y,this.size,this.size)}}function O(o,t={}){if(!o)return[];const s=Math.min(window.innerWidth/8,80);w.font=`bold ${s}px "Courier New", monospace`,w.textAlign="center",w.textBaseline="middle";const e=document.createElement("canvas"),i=e.getContext("2d"),m=w.measureText(o).width,l=s;e.width=m+40,e.height=l+40;const n=t.centerX??a.width/2,r=t.centerY??a.height/2,y=n-e.width/2,T=r-e.height/2;i.font=w.font,i.textAlign="center",i.textBaseline="middle",i.fillStyle="#fff",i.fillText(o,e.width/2,e.height/2);const p=i.getImageData(0,0,e.width,e.height),C=[],_=4;for(let P=0;P<e.height;P+=_)for(let v=0;v<e.width;v+=_){const $=(P*e.width+v)*4;if(p.data[$+3]>128){const U=y+v,S=T+P;C.push({x:U,y:S})}}return C}function J(o){b=o;const t=a.height/2,s=Math.max(40,a.width*st),e=Math.min(window.innerWidth/8,80);if(w.font=`bold ${e}px "Courier New", monospace`,!o){L=s,M=e*.2,x=[],h=[],d=[];return}let i=[],E=s,m=e*.2;if(o==="I am"){const n=w.measureText("I").width,r=w.measureText("am").width,y=w.measureText("I ").width,p=Math.max(0,y-n)*.75,C=O("I",{centerX:s+n/2,centerY:t});if(C.length===0){L=s,M=p,x=[],h=[],d=[];return}const _=Math.min(...C.map(u=>u.x)),P=s-_,v=C.map(u=>({x:u.x+P,y:u.y})),$=Math.max(...v.map(u=>u.x)),Q=$+p,U=Q+r/2,S=O("am",{centerX:U,centerY:t});if(S.length===0){L=$,M=p,x=[],h=[],d=[];return}const It=Math.min(...S.map(u=>u.x)),lt=S.map(u=>({x:u.x+(Q-It),y:u.y})),Et=Math.max(...lt.map(u=>u.x));i=v.concat(lt),E=Et,m=p}else{const n=O(o,{centerX:a.width/2,centerY:t});if(n.length===0){L=s,M=m,x=[],h=[],d=[];return}const r=Math.min(...n.map(p=>p.x)),y=Math.max(...n.map(p=>p.x)),T=s-r;i=n.map(p=>({x:p.x+T,y:p.y})),E=y+T}x.length!==i.length?x=i.map(n=>{const r=new G(a.width/2,a.height/2,n.x,n.y);return r.opacity=0,r.targetOpacity=1,r}):x.forEach((n,r)=>{const y=i[r];n.targetX=y.x,n.targetY=y.y,n.targetOpacity=1}),L=E,M=m,d=[],h=[]}function ot(){if(b!=="I am"){d=[],h=[];return}const o=a.height/2,t=O("a",{centerX:a.width/2,centerY:o});if(t.length===0){d=[],h=[];return}const s=Math.min(...t.map(l=>l.x)),e=Math.min(window.innerWidth/8,80),i=M>0?M:e*.2,m=L+i-s;d=t.map(l=>({x:l.x+m,y:l.y})),h.length!==d.length?h=d.map(l=>{const n=new G(a.width/2,a.height/2,l.x,l.y);return n.opacity=0,n.targetOpacity=0,n}):h.forEach((l,n)=>{const r=d[n];l.targetX=r.x,l.targetY=r.y})}function wt(o){if(b!=="I am"){h.forEach(t=>{t.targetOpacity=0});return}d.length===0&&ot(),d.length!==0&&h.forEach((t,s)=>{const e=d[s];t.targetX=e.x,t.targetY=e.y,t.targetOpacity=o?1:0})}function K(o){if(o>=H.length)return;const t=H[o];let s="",e=!1;t.startsWith("I am a ")?(s="I am",e=!0):t.startsWith("I am ")&&(s="I am"),(s!==b||x.length===0)&&J(s),s==="I am"&&d.length===0&&ot(),wt(e);const i=e?7:s==="I am"?5:0,E=i>0?t.slice(i).trimStart():t,m=O(E,{centerX:a.width/2,centerY:a.height/2}),l=[];for(let n=0;n<m.length;n+=1){let r,y;n<I.length?(r=I[n].x,y=I[n].y):(r=a.width/2,y=a.height/2);const T=new G(r,y,m[n].x,m[n].y);l.push(T)}for(let n=m.length;n<I.length;n+=1){const r=new G(I[n].x,I[n].y,a.width/2,a.height/2);r.opacity=.5,l.push(r)}I=l,et&&(et.textContent=t)}let yt=Date.now();const rt=2e3;let ct=!0;function dt(){if(!ct)return;const t=Date.now()-yt,s=Math.min(Math.floor(t/rt),H.length-1);s!==N&&(N=s,K(N)),D.fillStyle="rgba(255, 255, 255, 1)",D.fillRect(0,0,c.width,c.height),w.clearRect(0,0,a.width,a.height),ut.forEach(i=>{i.update(),i.draw(t*.001)}),x.forEach(i=>{i.update(),i.draw()}),h.forEach(i=>{i.update(),i.draw()}),I.forEach(i=>{i.update(),i.draw()});const e=Math.min(t/(rt*H.length)*100,100);tt&&(tt.style.width=`${e}%`),e>=100&&!j&&(j=!0,setTimeout(Y,400)),requestAnimationFrame(dt)}function xt(){F||(F=!0,ct=!1,g.classList.add("hidden"),setTimeout(()=>{g.style.display="none",document.body.classList.remove("loading-active"),A&&(A.style.opacity="1"),window.dispatchEvent(new Event("stellar-loader:complete"))},1e3))}J(b),K(0),dt()})();const ht=new Mt,f=new Lt(75,window.innerWidth/window.innerHeight,.1,1e3),B=new Tt;B.setSize(window.innerWidth,window.innerHeight);B.setClearColor(0,0);document.body.appendChild(B.domElement);const Ct=new zt,mt=new bt(f,B.domElement);mt.enablePan=!1;let z;Ct.load("./3DModels/cozy_campfire_-_shape_key_animation/scene.gltf",g=>{z=g.scene,ht.add(z),z.position.x=-5;const c=new vt(13450048,2,50);z.add(c),z.traverse(a=>{a.isMesh&&a.material.emissiveMap&&(a.material.emissiveIntensity=200)}),Wt()},void 0,g=>{console.error(g)});f.position.x=30;f.position.y=60;f.position.z=80;f.position;function ft(){requestAnimationFrame(ft),mt.update(),B.render(ht,f),console.log(f.position)}ft();function gt(){f.aspect=window.innerWidth/window.innerHeight,f.updateProjectionMatrix(),B.setSize(window.innerWidth,window.innerHeight)}window.addEventListener("resize",gt,!1);gt();function V(g,c,a){z&&TweenMax.to(z.rotation,1,{x:g,y:c,z:a})}const Pt=document.getElementById("reset-btn"),Bt=document.getElementById("blogs-btn"),Ot=document.getElementById("About-btn"),St=document.getElementById("homo-ludens");Pt.addEventListener("click",()=>{Z(),V(0,0,0),TweenMax.to(f.position,1,{x:30,y:60,z:80})});Bt.addEventListener("click",()=>{window.open("https://www.x1ao.art/","_self")});const R=document.getElementById("about-xiao-info");Ot.addEventListener("click",()=>{if(R.style.opacity!="0"){TweenMax.to(f.position,1,{x:18,y:4.7,z:-34.7});return}Z(),R.style.display="block",TweenMax.to(f.position,1,{x:18,y:4.7,z:-34.7}),setTimeout(()=>{R.style.opacity="1"},800)});const W=document.getElementById("homo-ludens-info");St.addEventListener("click",()=>{if(W.style.opacity!="0"){TweenMax.to(f.position,2,{x:-7.6,y:2.58,z:2.37,ease:Power2.easeInOut}),V(0,4*Math.PI/4,0);return}Z(),W.style.display="block",TweenMax.to(f.position,2,{x:-7.6,y:2.58,z:2.37,ease:Power2.easeInOut}),V(0,4*Math.PI/4,0),setTimeout(()=>{W.style.opacity="1"},1500)});function Z(){W.style.opacity="0",R.style.opacity="0",W.style.display="none",R.style.display="none"}function Rt(){document.querySelectorAll(".transfadein").forEach(c=>{c.style.opacity="1",c.style.transform="translateY(0)"})}function Wt(){window.dispatchEvent(new Event("stellar-loader:assetLoaded"))}window.addEventListener("stellar-loader:complete",()=>{const g=document.getElementById("content-container");g&&(g.style.opacity="1"),Rt()});
